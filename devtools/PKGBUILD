# POWER Maintainer: Alexander Baldeck <alex.bldck@gmail.com>
# Maintainer: Levente Polyak <anthraxx[at]archlinux[dot]org>
# Maintainer: Pierre Schmitz <pierre@archlinux.de>

pkgname=devtools
pkgver=20221002
pkgrel=1
pkgdesc='Tools for Arch Linux package maintainers'
arch=(any)
license=('GPL')
url='https://gitlab.archlinux.org/archlinux/devtools'
depends=('bash' 'openssh' 'subversion' 'rsync' 'arch-install-scripts'
         'git' 'bzr' 'mercurial' 'diffutils' 'util-linux' 'awk')
makedepends=('asciidoc')
optdepends=('btrfs-progs: btrfs support')
source=(${url}/uploads/a3a19bd63774cd4f54587b6a2053bc3d/devtools-${pkgver}.tar.gz
        ${url}/uploads/26d8b38e4def1a7b3c4ca649d944c559/devtools-${pkgver}.tar.gz.sig
        lazy-ppc-fix.patch)
validpgpkeys=(
  '4AA4767BBC9C4B1D18AE28B77F2D434B9741E8AC' # Pierre Schmitz <pierre@archlinux.org>
  '86CFFCA918CF3AF47147588051E8B148A9999C34' # Evangelos Foutras <foutrelis@archlinux.org>
  '8FC15A064950A99DD1BD14DD39E4B877E62EB915' # Sven-Hendrik Haase <svenstaro@archlinux.org>
  'A2FF3A36AAA56654109064AB19802F8B0D70FC30' # Jan Alexander Steffens (heftig) <heftig@archlinux.org>
  'B81B051F2D7FC867AAFF35A58DBD63B82072D77A' # SÃ©bastien Luttringer <seblu@archlinux.org>
  '6645B0A8C7005E78DB1D7864F99FFE0FEAE999BD' # Allan McRae (Developer) <allan@archlinux.org>
  'E240B57E2C4630BA768E2F26FC1B547C8D8172C8' # Levente Polyak <anthraxx@archlinux.org>
)
sha256sums=('bb8ff36a98375c0e9a014c641347079b103d07581fba666b38dbd283f87275ec'
            'SKIP'
            '1cd8709065203304ba622544719039110c07a5d3edb80b775c42aa7df41c2eaa')
b2sums=('1ab30becff370fd05b87b2aad884c401c786388545003264fbb7f3e51b07de4d735029ea624ad3cc253bc843c2ebc29b7ef3fb4c4d61f2ca2c0c60b2e8e41f5e'
        'SKIP'
        '3bd38fc2da0fb88da12728d948b0058c68a383957bdd4009176f3ba3827e9ae6492e08dd68ceffa87f6e59d347162410c6f7618986d122d37a065c5835298f96')

prepare() {
  cd ${pkgname}-${pkgver}
  patch -Np0 -d src/ -i ${srcdir}/lazy-ppc-fix.patch
}

build() {
  cd ${pkgname}-${pkgver}
  make BUILDTOOLVER="${pkgver}-${pkgrel}-${arch}" PREFIX=/usr
}

package() {
  cd ${pkgname}-${pkgver}
  make PREFIX=/usr DESTDIR="${pkgdir}" install
}

# vim: ts=2 sw=2 et:
