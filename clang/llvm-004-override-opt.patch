--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -999,6 +999,12 @@
     ${CMAKE_ARCHIVE_OUTPUT_DIRECTORY}/tf_runtime)
 endif()

+set(ARCH_CXX_OPT_FLAGS "" CACHE STRING "Optimization level to use")
+
+if (NOT ARCH_CXX_OPT_FLAGS STREQUAL "")
+    llvm_replace_compiler_option(CMAKE_CXX_FLAGS_RELEASE "-O3" "${ARCH_CXX_OPT_FLAGS}")
+endif()
+
 # Put this before tblgen. Else we have a circular dependence.
 add_subdirectory(lib/Demangle)
 add_subdirectory(lib/Support)
